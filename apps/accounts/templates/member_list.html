{% extends "base.html" %}
{% block content %}
<div style="max-width: 900px; margin: auto; padding: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1 style="font-weight: bold; color: #007bff;">Member List</h1>
        <a href="{% url 'register_member' %}" style="padding: 10px 15px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; font-size: 14px;">
            Add Member
        </a>
    </div>

    <!-- Search Bar -->
    <form method="GET" action="{% url 'member_list' %}" style="margin-bottom: 20px;">
        <input type="text" name="search_email" placeholder="Search by email" value="{{ request.GET.search_email|default_if_none:'' }}"
               style="padding: 10px; width: calc(100% - 110px); border: 1px solid #ddd; border-radius: 5px; font-size: 14px;">
        <button type="submit" style="padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 5px; font-size: 14px; cursor: pointer;">
            Search
        </button>
    </form>

    <div style="overflow-x: auto; border: 1px solid #ddd; border-radius: 5px;">
        <table style="width: 100%; border-collapse: collapse; margin: 0;">
            <thead style="background-color: #343a40; color: white;">
                <tr>
                    <th style="padding: 15px; text-align: left;">Name</th>
                    <th style="padding: 15px; text-align: left;">Username/User ID</th>
                    <th style="padding: 15px; text-align: left;">Email</th>
                    <th style="padding: 15px; text-align: left;">Role</th>
                    <th style="padding: 15px; text-align: center;">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for member in members %}
                <tr style="border-bottom: 1px solid #ddd;">
                    <td style="padding: 15px;">{{ member.full_name }}</td>
                    <td style="padding: 15px;">{{ member.username }}</td>
                    <td style="padding: 15px;">{{ member.email }}</td>
                    <td style="padding: 15px;">
                        <span style="padding: 5px 10px; border-radius: 5px;
                        {% if member.role == 'project_manager' %}
                            background-color: #007bff; color: white;
                        {% else %}
                            background-color: #6c757d; color: white;
                        {% endif %}">
                            {{ member.role|title }}
                        </span>
                    </td>
                    <td style="padding: 15px; text-align: center;">
                        <a href="{% url 'edit_member' member.id %}"
                           style="padding: 8px 12px; background-color: #ffc107; color: black; text-decoration: none; border-radius: 5px; font-size: 14px; margin-right: 10px;">
                            Edit
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" style="padding: 15px; text-align: center; color: #6c757d;">No members found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
